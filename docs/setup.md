# Setup

Last updated: 2025-08-17

## Engine and Plugins

- Unreal Engine 5.x
- Enable:
  - GameplayAbilities
  - GameplayTags
  - GameplayTasks

## Build Modules

Update YourProject.Build.cs:
```csharp
PrivateDependencyModuleNames.AddRange(new string[] {
  "GameplayAbilities",
  "GameplayTags",
  "GameplayTasks"
});
```

## Player Architecture

- PlayerState (e.g., AuraPlayerState)
  - Owns ASC + AttributeSet
  - Benefits:
    - Survives Pawn destruction (respawns retain stats/abilities)
    - Cleaner Character class
  - Set `NetUpdateFrequency = 100` for faster replication of state
  - ASC Replication Mode = Mixed

- Enemies (AI)
  - ASC + AttributeSet on Character
  - ASC Replication Mode = Minimal

## Init Ability Actor Info

- Call `ASC->InitAbilityActorInfo(OwnerActor, AvatarActor)` after actors are ready
- Recommended: add an ASC hook (e.g., `AbilityActorInfoSet()`) and call it from Character/Enemy once actor info is set (bind delegates, etc.)

## HUD/UI Initialization

- HUD constructs:
  - Overlay Widget (UUserWidget subclass)
  - Overlay Widget Controller (UObject subclass)
- Pass Widget Controller to Overlay Widget via `SetWidgetController()`
- After widget controller is set, call `WidgetControllerSet` (BlueprintImplementableEvent) to bind any delegates and initialize UI

## Attribute Set Defaults

- Use constructor `InitXxx()` methods generated by Accessor macros for initial values
- Validate with `showdebug abilitysystem` in console

## Blueprint/C++ Mix

- Prefer C++ for core systems, replication, and delegate wiring
- Prefer Blueprints for data-driven content (effects, pickups, materials), overlap volumes and simple wiring